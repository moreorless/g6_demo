!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@antv/g6")):"function"==typeof define&&define.amd?define(["@antv/g6"],e):"object"==typeof exports?exports.Minimap=e(require("@antv/g6")):t.Minimap=e(t.G6)}(window,function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=19)}([,,function(t,e){var n={}.toString;t.exports=function(t,e){return n.call(t)==="[object "+e+"]"}},function(t,e,n){var r=n(2),i=Array.isArray?Array.isArray:function(t){return r(t,"Array")};t.exports=i},,function(t,e,n){var r=n(9),i=n(3);t.exports=function(t,e){if(t)if(i(t))for(var n=0,o=t.length;n<o&&!1!==e(t[n],n);n++);else if(r(t))for(var a in t)if(t.hasOwnProperty(a)&&!1===e(t[a],a))break}},function(t,e){t.exports=function(t,e){if(t)for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);return t}},function(t,e){var n=document.createElement("table"),r=document.createElement("tr"),i=/^\s*<(\w+|!)[^>]*>/,o={tr:document.createElement("tbody"),tbody:n,thead:n,tfoot:n,td:r,th:r,"*":document.createElement("div")};t.exports=function(t){var e=i.test(t)&&RegExp.$1;e in o||(e="*");var n=o[e];t=t.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+t;var r=n.childNodes[0];return n.removeChild(r),r}},function(t,e,n){var r=n(11),i=n(3),o=5;function a(t,e,n,s){for(var u in n=n||0,s=s||o,e)if(e.hasOwnProperty(u)){var c=e[u];null!==c&&r(c)?(r(t[u])||(t[u]={}),n<s?a(t[u],c,n+1,s):t[u]=e[u]):i(c)?(t[u]=[],t[u]=t[u].concat(c)):void 0!==c&&(t[u]=c)}}t.exports=function(){for(var t=new Array(arguments.length),e=t.length,n=0;n<e;n++)t[n]=arguments[n];for(var r=t[0],i=1;i<e;i++)a(r,t[i]);return r}},function(t,e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){var e=void 0===t?"undefined":n(t);return null!==t&&"object"===e||"function"===e}},function(t,e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){return"object"===(void 0===t?"undefined":n(t))&&null!==t}},function(t,e,n){var r=n(10),i=n(2);t.exports=function(t){if(!r(t)||!i(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}},function(t,e){t.exports=function(t){return null===t||void 0===t}},function(t,e,n){var r=n(8),i=n(5),o=n(14),a=function(){function t(t){this._cfgs=r(this.getDefaultCfg(),t)}var e=t.prototype;return e.getDefaultCfg=function(){return{}},e.initPlugin=function(t){var e=this;e.set("graph",t);var n=e.getEvents(),r={};i(n,function(n,i){var a=o(e,n);r[i]=a,t.on(i,a)}),this._events=r,this.init()},e.init=function(){},e.getEvents=function(){return{}},e.get=function(t){return this._cfgs[t]},e.set=function(t,e){this._cfgs[t]=e},e.destroy=function(){},e.destroyPlugin=function(){this.destroy();var t=this.get("graph"),e=this._events;i(e,function(e,n){t.off(n,e)}),this._events=null,this._cfgs=null,this.destroyed=!0},t}();t.exports=a},function(t,e){t.exports=function(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n}},function(t,e,n){var r=n(2);t.exports=function(t){return r(t,"String")}},,,function(e,n){e.exports=t},function(t,e,n){function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var i=n(18).G,o=n(13),a=n(15),s=n(12),u=n(7),c=n(6),p=n(5),f=Math.max,l=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.init=function(){this.initContainer()},n.getDefaultCfg=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"}}},n.getEvents=function(){return{beforepaint:"updateCanvas"}},n.initContainer=function(){var t=this.get("graph"),e=this.get("size"),n=this.get("className"),r=this.get("container"),o=u('<div class="'+n+'" style="width:'+e[0]+"px; height:"+e[1]+'px"></div>');a(r)&&(r=document.getElementById(r)),r?r.appendChild(o):t.get("container").appendChild(o),this.set("container",o);var s=u('<div class="g6-minimap-container"></div>');o.appendChild(s);var c=new i.Canvas({containerDOM:s,width:e[0],height:e[1],pixelRatio:t.get("pixelRatio")});this.set("canvas",c),this.updateCanvas()},n.initViewport=function(){var t,e,n,r,i,o,a,p=this._cfgs,f=p.size,l=p.graph,h=l.get("pixelRatio")||l.get("canvas").get("pixelRatio"),g=l.get("width")/f[0]*h,d=l.get("height")/f[1]*h,v=this.get("canvas").get("containerDOM"),y=u('<div class="'+p.viewportClassName+'" style="position:absolute;left:0;top:0;box-sizing:border-box;border: 2px solid #1980ff"></div>');v.addEventListener("mousedown",function(s){if(s.target===y){var u=y.style;r=parseInt(u.left,10),i=parseInt(u.top,10),o=parseInt(u.width,10),a=parseInt(u.height,10),o>=f[0]||a>=f[1]||(n=!0,t=s.clientX,e=s.clientY)}},!1),v.addEventListener("mousemove",function(u){if(n&&!s(u.clientX)&&!s(u.clientY)){var p=t-u.clientX,v=e-u.clientY;r-p<0?p=r:r-p+o>f[0]&&(p=r+o-f[0]),i-v<0?v=i:i-v+a>f[1]&&(v=i+a-f[1]),c(y,{left:(r-=p)+"px",top:(i-=v)+"px"}),l.translate(p*g*h,v*d*h),t=u.clientX,e=u.clientY}},!1),v.addEventListener("mouseleave",function(){n=!1},!1),v.addEventListener("mouseup",function(){n=!1},!1),this.set("viewport",y),v.appendChild(y)},n.updateCanvas=function(){var t=this.get("size"),e=this.get("graph"),n=this.get("canvas");switch(this.get("type")){case"default":this._updateGraphShapes();break;case"keyShape":this._updateKeyShapes();break;case"delegate":this._updateDelegateShapes();break;default:this._updateGraphShapes()}var r=n.getBBox(),i=f(r.width,e.get("width")),o=f(r.height,e.get("height")),a=n.get("pixelRatio"),s=Math.min(t[0]/i,t[1]/o);n.resetMatrix();var u=-(r.minX>0?0:r.minX),c=-(r.minY>0?0:r.minY);n.translate(u,c),n.scale(s*a,s*a);var p=(t[0]-i*s)/2,l=(t[1]-o*s)/2;n.translate(p*a,l*a),n.draw(),this._updateViewport(s,p+u*s,l+c*s)},n._updateKeyShapes=function(){var t=this._cfgs.graph,e=this.get("canvas"),n=e.get("children")[0];n||(n=e.addGroup()).setMatrix(t.get("group").getMatrix());var r=t.getNodes();n.clear(),this._getGraphEdgeKeyShape(n),p(r,function(t){if(t.isVisible()){var e=n.addGroup();e.setMatrix(t.get("group").attr("matrix")),e.add(t.get("keyShape").clone())}})},n._updateGraphShapes=function(){var t=this.get("graph"),e=this.get("canvas"),n=t.get("group").clone();n.resetMatrix(),e.get("children")[0]=n},n._updateDelegateShapes=function(){var t=this._cfgs.graph,e=this.get("canvas"),n=e.get("children")[0]||e.addGroup(),i=this.get("delegateStyle");n.clear(),this._getGraphEdgeKeyShape(n),p(t.getNodes(),function(t){if(t.isVisible()){var e=t.getBBox();n.addShape("rect",{attrs:r({x:e.minX,y:e.minY,width:e.width,height:e.height},i)})}})},n._getGraphEdgeKeyShape=function(t){var e=this.get("graph");p(e.getEdges(),function(e){e.isVisible()&&t.add(e.get("keyShape").clone())})},n._updateViewport=function(t,e,n){var r=this.get("graph"),i=this.get("size"),o=r.get("width"),a=r.get("height"),s=r.getPointByCanvas(0,0),u=r.getPointByCanvas(o,a),p=this.get("viewport");p||this.initViewport();var f=(u.x-s.x)*t,l=(u.y-s.y)*t,h=s.x*t+e,g=s.y*t+n;f>i[0]&&(f=i[0]),l>i[1]&&(l=i[1]),c(p,{left:h>0?h+"px":0,top:g>0?g+"px":0,width:f+"px",height:l+"px"})},n.getCanvas=function(){return this.get("canvas")},n.getViewport=function(){return this.get("viewport")},n.getContainer=function(){return this.get("container")},n.destroy=function(){this.get("canvas").destroy();var t=this.get("container");t.parentNode.removeChild(t)},e}(o);t.exports=l}])});
//# sourceMappingURL=minimap.js.map